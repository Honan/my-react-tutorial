# Recompose

[Recompose](https://github.com/acdlite/recompose) - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å HOC–∫–∞–º–∏.

–ü–µ—Ä–µ–π–¥–µ–º —Å—Ä–∞–∑—É –∫ –ø—Ä–∏–º–µ—Ä—É. –£ –Ω–∞—Å –±—É–¥–µ—Ç –≥—Ä—É–ø–ø–∞ –∏–∑ 3 –∫–Ω–æ–ø–æ–∫, –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ –∫–Ω–æ–ø–∫—É –æ–Ω–∞ –±—É–¥–µ—Ç –≤—ã–¥–µ–ª—è—Ç—å—Å—è –∫—Ä–∞—Å–Ω—ã–º. –í—Å–µ –∫–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –≤ –æ–¥–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ. –ù–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫–æ–π-—Ç–æ state, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è. –ù–æ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —ç—Ç–æ–≥–æ –Ω–∏—á–µ–≥–æ –Ω–µ –±—É–¥–µ—Ç, –∞ –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Recompose.

### –ò–º–ø–æ—Ä—Ç—ã

  - **—Åompose**. –¢–∞–∫ –∫–∞–∫ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ HOC–æ–≤, —Ç–æ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª–∏—Ç —Å–¥–µ–ª–∞—Ç—å –∏—Ö –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∏ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.
  - **withState**. –î–∞–Ω–Ω—ã–π HOC –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å state. –ò –ø—Ä–∏–Ω–∏–º–∞–µ—Ç 3 –∞—Ä–≥—É–º–µ–Ω—Ç–∞. –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è, —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ–ª—è, –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
  - **withHandlers**. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è. –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è –æ–±—ä–µ–∫—Ç, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—è–º–∏ –±—É–¥—É—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ toggleButton), –∞ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –ø–æ–ª–µ–π –±—É–¥—É—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –æ–±—ä–µ–∫—Ç props –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ö–µ–Ω–¥–ª–µ—Ä—ã.
  - **mapProps**. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å –ª–∏—à–Ω–∏–µ props, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –î–∞–Ω–Ω—ã–µ HOC –ø–æ–ª—É—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤ –≤–∏–¥–µ –∞—Ç—Ä–∏–±—É—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ props –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–µ.
  - **pure**. –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É HOC –º—ã –∏–∑–±–µ–∂–∏–º –ª–∏—à–Ω–∏—Ö —Ä–∏—Ä–µ–Ω–¥–æ—Ä–æ–≤.

```javascript
import {
    withState,
    withHandlers,
    mapProps,
    pure,
    compose
    } from "recompose";

const Buttons = ({ buttons, toggleButton, selectedIndex }) => (
  <div>
    {buttons.map(index => (
      <button
        onClick={toggleButton}
        data-key={index}
        key={index}
        style={Object.assign(
          {},
          selectedIndex.includes(index) && {
            backgroundColor: "red"
          }
        )}
      >
        {index}
      </button>
    ))}
  </div>
);

const enhance = compose( // –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å HOC –≤ –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
  withState("selectedIndex", "changeSelectedIndex", []), // state –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–∏
  withState("buttons", "changeButtons", ["üòÄ", "üòÖ", "üòî"]), // –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è, —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ–ª—è, –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  withHandlers({
    toggleButton: props => event => {
      const index = event.target.dataset.key;
      props.changeSelectedIndex(() => [index]);
    }
  }),
  mapProps(({ changeSelectedIndex, changeButtons, ...rest }) => rest), // –≤—ã–¥–µ–ª—è–µ–º props, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω—ã
  pure
);

export default enhance(Buttons);
```

[![Edit znvjkpmmzl](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/znvjkpmmzl)